<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HexDrift_Testing</title>
    <link rel="stylesheet" href="index.css">
</head>

<body>

    <div class="hdr">
        <img src="icons/icon48.png" alt="HexDriftLogo">
        <div>
            <div class="brand">HEXDRIFT</div>
            <div class="page-url" id="pageUrl">Loading...</div>
        </div>
        <div class="hde-actions">
            <button class="icon-btn" id="searchToggle">ğŸ”</button>
            <button class="icon-btn" id="themeToggle">ğŸŒ™</button>
            <button class="icon-btn" id="exportBtn">â¬‡ Export</button>
            <button class="icon-btn primary" id="refreshBtn">â†»</button>
        </div>
    </div>

    <div class="search-bar" id="searchBar">
        <input class="search-input" id="searchInput" placeholder="Filter experiments by name or ID...">
    </div>

    <div class="tabs" id="tabsRow">
        <div class="tab active" data-tab="experiments">ğŸ§ª Experiments</div>
        <div class="tab" data-tab="goals">ğŸ¯ Goals <span class="badge" id="goalsCount">0</span></div>
        <div class="tab" data-tab="events">ğŸ“¡ Events <span class="badge" id="eventsCount">0</span></div>
        <div class="tab" data-tab="flicker">âš¡ Flicker <span class="badge" id="flickerCount">0</span></div>
        <div class="tab" data-tab="performance">ğŸ Perf</div>
        <div class="tab" data-tab="cookies">ğŸª Cookies <span class="badge" id="cookiesCount">0</span></div>
        <div class="tab" data-tab="history">ğŸ“œ History</div>
        <div class="tab" data-tab="seo">ğŸ“ˆ SEO</div>
        <div class="tab" data-tab="a11y">â™¿ A11y</div>
    </div>

    <div class="content">
        <div id="loadingState" class="loading">
            <div class="spinner"></div>
            <div>Analysing page...</div>
        </div>

        <div id="mainContent" style="display: none;">
            <div class="tab-panel active" id="panel-experiments">
                <div class="platform-row" id="platformRow"></div>
                <div id="experimentsContent"></div>
            </div>
            <div class="tab-panel" id="panel-goals">
                <div id="goalsContent"></div>
            </div>
            <div class="tab-panel" id="panel-events">
                <div style="display:flex;gap:6px;margin-bottom:8px;align-items:center">
                    <span style="font-size:10px;color:var(--muted)">Auto-refresh:</span>
                    <button class="icon-btn" id="eventsRefresh">â†» Refresh</button>
                    <button class="icon-btn" id="clearEvents" style="margin-left:auto">Clear</button>
                </div>
                <div id="eventsContent"></div>
            </div>
            <div class="tab-panel" id="panel-flicker">
                <div id="flickerContent"></div>
            </div>
            <div class="tab-panel" id="panel-performance">
                <div id="psiSection" class="card" style="margin-bottom:7px">
                    <div class="card-hdr">
                        <div class="card-title">ğŸ“Š PageSpeed Insights API</div>
                    </div>
                    <input class="psi-input" id="psiKey" placeholder="Paste your Google PSI API key..." />
                    <div class="psi-row">
                        <select class="psi-input" id="psiStrategy" style="width:auto;flex-shrink:0">
                            <option value="mobile">Mobile</option>
                            <option value="desktop">Desktop</option>
                        </select>
                        <button class="icon-btn primary" id="runPSI" style="flex:1">Run Lighthouse Audit</button>
                    </div>
                    <div id="psiResult"></div>
                </div>
                <div id="performanceContent"></div>
            </div>
            <div class="tab-panel" id="panel-cookies">
                <div id="cookiesContent"></div>
            </div>
            <div class="tab-panel" id="panel-history">
                <div style="display:flex;justify-content:flex-end;margin-bottom:6px">
                    <button class="icon-btn" id="clearHistory">ğŸ—‘ Clear History</button>
                </div>
                <div id="historyContent"></div>
            </div>
            <div class="tab-panel" id="panel-seo">
                <div id="seoContent"></div>
            </div>
            <div class="tab-panel" id="panel-a11y">
                <div id="a11yContent"></div>
            </div>
        </div>

    </div>
    <script src="popup.js"></script>
</body>

</html>